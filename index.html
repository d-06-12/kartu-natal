<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Kartu Ucapan Natal Interaktif</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="snow"></div>

    <main class="container">
      <header class="hero">
        <h1>Selamat Natal ðŸŽ„</h1>
        <p class="subtitle">
          Kirim ucapan hangat dengan suara, lagu, dan foto â€” balas surat juga
          tersedia
        </p>
      </header>

      <!-- AUTH PANEL: email register / login -->
      <section class="card auth-panel">
        <h2>Akun</h2>
        <div class="auth-forms">
          <div class="auth-left">
            <input
              id="authName"
              placeholder="Nama (opsional untuk tampilkan)"
            />
            <input id="authEmail" placeholder="Email" type="email" required />
            <input
              id="authPass"
              placeholder="Password"
              type="password"
              required
            />
            <div style="display: flex; gap: 8px; margin-top: 8px">
              <button id="btnRegister" class="primary">Buat Akun</button>
              <button id="btnLogin" class="ghost">Login</button>
            </div>
          </div>
          <div class="auth-right">
            <div id="userInfo" class="muted">Belum login</div>
            <div style="margin-top: 8px">
              <button id="btnLogout" class="ghost hidden">Logout</button>
            </div>
          </div>
        </div>
        <small class="hint"
          >Akun disimpan di browser (demo). Gunakan email & password untuk
          login.</small
        >
      </section>

      <!-- Composer: create new message -->
      <section class="card composer">
        <h2>Buat Ucapan Baru</h2>

        <!-- fromName still editable but will be auto-filled when logged in -->
        <input
          id="fromName"
          placeholder="Nama Anda (akan diisi otomatis jika login)"
          maxlength="50"
        />

        <textarea
          id="messageText"
          rows="4"
          placeholder="Tulis ucapanmu..."
        ></textarea>

        <label class="field">
          <span>Lagu (link mp3 / direct audio URL)</span>
          <input id="audioUrl" placeholder="https://.../song.mp3" />
          <button id="btnLoadAudio" type="button">Load & Preview</button>
          <audio id="previewAudio" controls class="hidden"></audio>
          <small class="hint"
            >Link harus direct audio (mp3). YouTube gunakan fitur
            YouTube.</small
          >
        </label>

        <label class="field">
          <span>Tambahkan dari YouTube (embed)</span>
          <input
            id="youtubeUrl"
            placeholder="https://www.youtube.com/watch?v=VIDEO_ID atau https://youtu.be/VIDEO_ID"
          />
          <button id="btnLoadYouTube" type="button">
            Load YouTube Preview
          </button>
          <div id="youtubePreview" class="youtube-preview hidden"></div>
        </label>

        <label class="field">
          <span>Rekam suara langsung</span>
          <div class="rec-row">
            <button id="btnRecord" type="button">Mulai Rekam</button>
            <span id="recStatus" class="muted">Belum merekam</span>
          </div>
          <audio id="recordedPlay" controls class="hidden"></audio>
        </label>

        <label class="field">
          <span>Unggah foto/thumbnail</span>
          <input id="photoInput" type="file" accept="image/*" />
          <img
            id="photoPreview"
            class="photo-preview hidden"
            alt="preview foto"
          />
        </label>

        <div class="actions">
          <button id="btnSend" class="primary">Kirim Ucapan</button>
          <button id="btnClear" class="ghost">Bersihkan</button>
        </div>

        <div
          id="linkBox"
          class="muted hidden"
          style="margin-top: 10px; word-break: break-all"
        ></div>
      </section>

      <!-- Messages list -->
      <section class="card messages">
        <h2>Daftar Surat</h2>
        <div id="messagesList" class="messages-list"></div>
        <div id="emptyHint" class="muted">
          Belum ada surat. Kirim ucapan pertamamu!
        </div>
      </section>
    </main>

    <template id="messageTemplate">
      <article class="message-item">
        <header>
          <div class="meta">
            <strong class="sender"></strong>
            <time class="time muted"></time>
          </div>
          <div class="actions-msg">
            <button class="btnReply">Balas</button>
            <button class="btnShare">Bagikan</button>
          </div>
        </header>
        <p class="text"></p>
        <div class="media">
          <img class="thumb hidden" alt="foto ucapan" />
          <audio class="audio hidden" controls></audio>
          <div class="yt-container hidden"></div>
        </div>
        <div class="replies"></div>
        <div class="reply-box hidden">
          <textarea
            class="replyText"
            rows="2"
            placeholder="Tulis balasan..."
          ></textarea>
          <div class="reply-row">
            <button class="btnSendReply">Kirim Balasan</button>
            <button class="btnCancelReply" type="button">Batal</button>
          </div>
        </div>
      </article>
    </template>

    <script src="app.js"></script>
  </body>
</html>
